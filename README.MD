# ğŸª Dashboard POS - Colmado Gerardo

Dashboard moderno para sistema de punto de venta (POS) con base de datos PostgreSQL alojada en Neon y desplegado en Vercel.

## ğŸš€ CaracterÃ­sticas

- **Dashboard Principal**: MÃ©tricas en tiempo real de ventas, inventario y clientes
- **Historial de Ventas**: Consulta completa de todas las transacciones
- **Reportes Avanzados**: AnÃ¡lisis financiero detallado y reportes por perÃ­odo
- **Responsive Design**: Optimizado para desktop y mÃ³vil
- **Base de Datos PostgreSQL**: Alojada en Neon con SSL
- **Despliegue en Vercel**: Serverless functions para la API

## ğŸ“Š Funcionalidades

### Dashboard
- Ingresos del perÃ­odo actual
- Ventas semanales y mensuales
- Balance de caja en tiempo real
- Total de clientes registrados
- Valor del inventario
- Productos con stock bajo

### Historial de Ventas
- Filtros por perÃ­odo (hoy, semana, mes, aÃ±o)
- InformaciÃ³n detallada de cada venta
- BÃºsqueda por cliente, vendedor o NCF
- PaginaciÃ³n de resultados

### Reportes
- AnÃ¡lisis financiero completo
- Productos mÃ¡s vendidos
- Clientes frecuentes
- Ventas por mÃ©todo de pago
- Resumen por vendedor

## ğŸ› ï¸ TecnologÃ­as

- **Frontend**: HTML5, CSS3, JavaScript (Vanilla)
- **Backend**: Node.js con Vercel Serverless Functions
- **Base de Datos**: PostgreSQL (Neon)
- **Deployment**: Vercel
- **AutenticaciÃ³n**: Preparado para bcrypt

## ğŸ“¦ InstalaciÃ³n

### Prerrequisitos
- Cuenta en [Neon](https://neon.tech) con base de datos PostgreSQL
- Cuenta en [Vercel](https://vercel.com)
- Node.js 18+ (para desarrollo local)

### 1. Clonar el repositorio
```bash
git clone <tu-repositorio>
cd pos-dashboard
```

### 2. Instalar dependencias
```bash
npm install
```

### 3. Configurar variables de entorno
```bash
cp .env.example .env.local
```

Edita `.env.local` con tu string de conexiÃ³n de Neon:
```
DATABASE_URL=postgresql://usuario:password@ep-xxx.us-east-1.postgres.vercel-storage.com/nombre_bd?sslmode=require
```

### 4. Probar conexiÃ³n (desarrollo local)
```bash
npm run dev
```

Visita: `http://localhost:3000/api/test-connection`

## ğŸš€ Despliegue en Vercel

### 1. Instalar Vercel CLI
```bash
npm i -g vercel
```

### 2. Desplegar
```bash
vercel --prod
```

### 3. Configurar variable de entorno en Vercel
En el dashboard de Vercel:
1. Ve a tu proyecto
2. Settings â†’ Environment Variables
3. AÃ±ade: `DATABASE_URL` con tu string de conexiÃ³n de Neon

### 4. Verificar despliegue
Visita: `https://tu-proyecto.vercel.app/api/test-connection`

## ğŸ“ Estructura del Proyecto

```
pos-dashboard/
â”œâ”€â”€ index.html              # Dashboard principal
â”œâ”€â”€ package.json            # Dependencias del proyecto
â”œâ”€â”€ vercel.json            # ConfiguraciÃ³n de Vercel
â”œâ”€â”€ README.md              # DocumentaciÃ³n
â”œâ”€â”€ .env.example           # Ejemplo de variables de entorno
â””â”€â”€ api/
    â”œâ”€â”€ dashboard-stats.js # EstadÃ­sticas del dashboard
    â”œâ”€â”€ sales-history.js   # Historial de ventas
    â”œâ”€â”€ reports.js         # Reportes y anÃ¡lisis
    â””â”€â”€ test-connection.js # Prueba de conexiÃ³n a BD
```

## ğŸ”Œ Endpoints de la API

### GET `/api/test-connection`
Prueba la conexiÃ³n a la base de datos
```json
{
  "success": true,
  "message": "ConexiÃ³n a base de datos exitosa",
  "data": {
    "connection_info": {...},
    "tables": [...],
    "record_counts": {...}
  }
}
```

### GET `/api/dashboard-stats`
Obtiene estadÃ­sticas principales del dashboard
```json
{
  "success": true,
  "data": {
    "periodIncome": 0,
    "weeklySales": 0,
    "monthlySales": 0,
    "cashBalance": 0,
    "totalSales": 0,
    "avgSale": 0,
    "inventoryValue": 0,
    "totalCustomers": 0,
    "lowStockCount": 0
  }
}
```

### GET `/api/sales-history?period=month&limit=100`
Obtiene el historial de ventas
- **ParÃ¡metros**:
  - `period`: today, week, month, quarter, year, all
  - `limit`: nÃºmero de registros (default: 100)
  - `offset`: para paginaciÃ³n (default: 0)

### GET `/api/reports?period=month&report_type=all`
Obtiene reportes completos
- **ParÃ¡metros**:
  - `period`: today, week, month, quarter, year
  - `report_type`: all, financial, products, customers

## ğŸ’¾ Base de Datos

El dashboard estÃ¡ diseÃ±ado para trabajar con la estructura de base de datos PostgreSQL proporcionada, que incluye:

- `users` - Usuarios del sistema
- `products` - CatÃ¡logo de productos
- `customers` - Base de clientes
- `sales` - Registro de ventas
- `sale_items` - Detalles de productos vendidos
- `categories` - CategorÃ­as de productos
- `cash_register` - Control de caja
- `store_config` - ConfiguraciÃ³n de la tienda

## ğŸ”’ Seguridad

- Conexiones SSL a la base de datos
- ValidaciÃ³n de parÃ¡metros en todos los endpoints
- Manejo seguro de errores sin exponer informaciÃ³n sensible
- Variables de entorno para credenciales

## ğŸ› SoluciÃ³n de Problemas

### Error de conexiÃ³n a la base de datos
1. Verifica que `DATABASE_URL` estÃ© configurada correctamente
2. AsegÃºrate de que la base de datos en Neon estÃ© activa
3. Comprueba que el string de conexiÃ³n incluya `?sslmode=require`

### Datos vacÃ­os en el dashboard
- Es normal si tienes una base de datos limpia (sin ventas)
- Prueba agregando algunos datos de prueba

### Error 500 en las APIs
1. Revisa los logs en Vercel Dashboard
2. Verifica que todas las tablas existan en tu base de datos
3. Comprueba que el usuario de la BD tenga los permisos necesarios

## ğŸ“ˆ PrÃ³ximas Funcionalidades

- [ ] AutenticaciÃ³n de usuarios
- [ ] Modo oscuro
- [ ] ExportaciÃ³n de reportes (PDF, Excel)
- [ ] Notificaciones en tiempo real
- [ ] Dashboard para vendedores
- [ ] IntegraciÃ³n con impresoras de tickets

## ğŸ¤ Contribuir

1. Fork el proyecto
2. Crea una rama para tu feature (`git checkout -b feature/AmazingFeature`)
3. Commit tus cambios (`git commit -m 'Add some AmazingFeature'`)
4. Push a la rama (`git push origin feature/AmazingFeature`)
5. Abre un Pull Request

## ğŸ“„ Licencia

Este proyecto estÃ¡ bajo la Licencia MIT. Ver `LICENSE` para mÃ¡s detalles.

## ğŸ“ Soporte

Para soporte o preguntas:
- Abrir un issue en GitHub
- Email: soporte@colmadogerardo.com

---

â­ **Â¡Dale una estrella al repo si te fue Ãºtil!**